# Wind Polygon Visualization Features

## Overview
The FrontendVersion2 project now includes comprehensive wind polygon visualization with the following new layers:

### 1. Combined Coverage Layer (Background)
- **API Endpoint**: `/api/combined-coverage`
- **Description**: Shows the unified scent detection area combining all rover measurements
- **Styling**: Tan/beige fill with brown dashed border, very transparent (15% opacity)
- **Data Source**: `unified_scent_coverage` layer from wind polygon GeoPackage

### 2. Wind Feather Polygons (Foreground)
- **API Endpoint**: `/api/wind-polygons`
- **Description**: Individual scent detection polygons for each rover measurement
- **Styling**: Colored by wind speed, solid lines for strong wind (>5 m/s), dashed for light wind
- **Data Source**: `wind_scent_polygons` layer from wind polygon GeoPackage
- **Limit**: Shows latest 20 polygons to avoid map clutter

## Layer Ordering (Back to Front)
1. **Forest Boundary** (Green) - Base forest area
2. **Combined Coverage** (Tan/Beige) - Total scent detection area
3. **Wind Feather Polygons** (Colored by wind speed) - Individual detection zones
4. **Rover Trail** (Orange) - Historical path
5. **Wind Arrows** (Colored vectors) - Point wind measurements
6. **Current Rover Position** (Red marker) - Live location

## Color Coding
- **Wind Speed Colors**:
  - Light Blue (0-2 m/s): Calm
  - Blue (2-4 m/s): Light breeze
  - Yellow (4-8 m/s): Moderate breeze
  - Orange (8-10 m/s): Fresh breeze
  - Red (10+ m/s): Strong wind

## Data Requirements
- Wind polygon data must be generated by running the `ConvertWinddataToPolygon` project
- Files are expected in `C:\temp\Rover1\` directory:
  - `rover_windpolygon.gpkg` (or timestamped versions)
  - Contains both `wind_scent_polygons` and `unified_scent_coverage` layers

## Features
- **Real-time Updates**: Map updates every 2 seconds with new rover data
- **Layer Control**: Toggle visibility of different layers
- **Interactive Popups**: Click on any element for detailed information
- **Responsive Design**: Adapts to different screen sizes
- **Error Handling**: Graceful fallbacks if wind polygon data is not available

## Technical Implementation
- **Backend**: ASP.NET Core with Blazor Server-Side
- **Frontend**: Leaflet.js for interactive mapping
- **Data Format**: GeoJSON for web compatibility
- **Spatial Data**: NetTopologySuite for geometry processing

## Usage Instructions
1. Run the RoverSimulator to generate rover measurement data
2. Run the ConvertWinddataToPolygon project to create wind polygons
3. Start FrontendVersion2 to view the visualization
4. Use the layer control (top-right) to toggle different layers
5. Click on map elements to see detailed information

## File Changes Made
- `ProgramFrontendRover.cs`: Added wind polygon API endpoints
- `Pages/Index.razor`: Updated UI with new layer information
- `wwwroot/js/leafletInit.js`: Added wind polygon visualization functions